# โ ุชุญุฏูุซ ุตูุญุฉ ุงูุฎุฒูุฉ - ุนุฑุถ ุฌููุน ุงูุนูููุงุช ุงูููููุฉ

## ๐ฏ **ุงูุชุญุฏูุซ ุงููุทููุจ:**
ุนุฑุถ **ุฌููุน ุงูุนูููุงุช ุงููุงููุฉ** ุงูุชู ุญุตูุช ุงูููู ูู ุตูุญุฉ ุงูุฎุฒูุฉ:
- ๐ฐ ุงููุจูุนุงุช ุงูููุฏูุฉ (ูู ุฌุฏูู transactions)
- ๐ฅ ุงูุฅูุฑุงุฏุงุช ุงููุฏููุฉ (ูู ุฌุฏูู treasury_transactions)
- ๐ค ุงููุตุฑููุงุช (ูู ุฌุฏูู treasury_transactions)

---

## โ **ูุง ุชู ุชูููุฐู:**

### 1. **ุชุญุฏูุซ Controller** (`TreasuryController.php`)

#### **ูุจู ุงูุชุญุฏูุซ:**
```php
// ูุงู ูุฌูุจ ููุท ูู treasury_transactions
$todayTransactions = TreasuryTransaction::whereDate('transaction_date', $date)->get();
```

#### **ุจุนุฏ ุงูุชุญุฏูุซ:**
```php
// ุงูุขู ูุฌูุจ ูู ูุตุฏุฑูู ููุฏูุฌูู:

// 1. ุนูููุงุช ุงูุฎุฒูุฉ ุงููุฏููุฉ
$treasuryTransactions = TreasuryTransaction::whereDate('transaction_date', $date)->get();

// 2. ุงููุจูุนุงุช ุงูููุฏูุฉ
$salesTransactions = Transaction::whereNull('client_id')
    ->whereDate('created_at', $date)
    ->get();

// 3. ุฏูุฌูู ูู collection ูุงุญุฏ
$allTransactions = $treasuryTransactions->concat($salesTransactions)->sortByDesc('date');
```

#### **ุงููุฎุฑุฌุงุช ููุญุฏุฉ:**
```php
[
    'id' => 'treasury_1' ุฃู 'sale_1',
    'type' => 'income' ุฃู 'expense',
    'category' => 'ุงุณู ุงููุฆุฉ',
    'description' => 'ุงููุตู',
    'amount' => ุงููุจูุบ,
    'date' => ุงูุชุงุฑูุฎ,
    'user' => 'ุงุณู ุงูููุธู',
    'source' => 'treasury' ุฃู 'sales'
]
```

---

### 2. **ุชุญุฏูุซ View** (`treasury/index.blade.php`)

#### **ุงูุชุบููุฑุงุช:**

1. **ุงุณุชุจุฏุงู ุงููุชุบูุฑ:**
   - `$todayTransactions` โ `$allTransactions`

2. **ุงูุชุนุงูู ูุน Array ุจุฏูุงู ูู Object:**
   - `$trx->type` โ `$trx['type']`
   - `$trx->category` โ `$trx['category']`
   
3. **ุนุฑุถ ุงุณู ุงูููุธู:**
   ```blade
   <small class="d-block text-info mt-1">{{ $trx['user'] }}</small>
   ```

4. **ุงูุชูุฑูู ุจูู ุงููุตุงุฏุฑ:**
   ```blade
   @if($trx['source'] == 'treasury')
       <!-- ุฒุฑ ุญุฐู -->
   @else
       <!-- badge "ูุจูุนุงุช" -->
   @endif
   ```

---

## ๐ **ููู ูุนูู ุงููุธุงู ุงูุขู:**

### **ุนูุฏ ูุชุญ ุตูุญุฉ ุงูุฎุฒูุฉ:**
```
/treasury โ ูุนุฑุถ ุญุฑูุงุช ุงูููู (23-12-2025)
```

**ูุง ูุชู ุนุฑุถู:**
1. โ ุฌููุน ุงููุจูุนุงุช ุงูููุฏูุฉ ุงูููู
2. โ ุฌููุน ุงูุฅูุฑุงุฏุงุช ุงููุณุฌูุฉ ูุฏููุงู
3. โ ุฌููุน ุงููุตุฑููุงุช ุงููุณุฌูุฉ

### **ุนูุฏ ุงูุถุบุท ุนูู "ุนุฑุถ ุงููู":**
```
/treasury?view_all=true โ ูุนุฑุถ ูู ุงูุญุฑูุงุช (ุฌููุน ุงูุชูุงุฑูุฎ)
```

---

## ๐จ **ุงูุนุฑุถ ูู ุงูุฌุฏูู:**

| ููุน | ุงูุจูุฏ | ุงููุตู | ุงููุจูุบ | ุฅุฌุฑุงุก |
|-----|-------|-------|--------|--------|
| ๐ฅ ุฅูุฑุงุฏ | ูุจูุนุงุช ุจูุฒูู 92 | ุจูุน ููุฏู - ุดููุช #5<br><small>ุฃุญูุฏ ูุญูุฏ</small> | 500.00 | ๐ท๏ธ ูุจูุนุงุช |
| ๐ฅ ุฅูุฑุงุฏ | ุฏูุนุฉ ุนููู | ุฏูุนุฉ ูู ุนููู ูุญููุฏ<br><small>ุฃุญูุฏ ูุญูุฏ</small> | 1,000.00 | ๐๏ธ ุญุฐู |
| ๐ค ูุตุฑูู | ูุดุชุฑูุงุช ูููุฏ | ุดุฑุงุก 1000 ูุชุฑ ร 11.5 ุฌ.ู<br><small>ุฃุญูุฏ ูุญูุฏ</small> | 11,500.00 | ๐๏ธ ุญุฐู |

---

## โ๏ธ **ุงูุญุณุงุจุงุช:**

### **ุงูุฑุตูุฏ ุงูุงูุชุชุงุญู:**
```php
$openingBalance = 
    (ุฅูุฑุงุฏุงุช ุงูุฎุฒูุฉ ูุจู ุงูุชุงุฑูุฎ) + 
    (ุงููุจูุนุงุช ุงูููุฏูุฉ ูุจู ุงูุชุงุฑูุฎ) - 
    (ุงููุตุฑููุงุช ูุจู ุงูุชุงุฑูุฎ)
```

### **ุญุฑูุงุช ุงูููู:**
```php
$todayIncome = ูุฌููุน ุงูุฅูุฑุงุฏุงุช + ุงููุจูุนุงุช
$todayExpense = ูุฌููุน ุงููุตุฑููุงุช
```

### **ุงูุฑุตูุฏ ุงูุญุงูู:**
```php
$currentBalance = $openingBalance + $todayIncome - $todayExpense
```

---

## ๐ **ููุงุญุธุงุช ูุงูุฉ:**

### 1. **ุงููุจูุนุงุช ุงูููุฏูุฉ ููุท:**
- ูุชู ุนุฑุถ ุงููุจูุนุงุช ุงูุชู **ููุณ ููุง client_id** ููุท
- ุงููุจูุนุงุช ุงูุขุฌูุฉ **ูุง ุชุธูุฑ** ูุฃููุง ูู ุชุฏุฎู ุงูุฎุฒูุฉ ุจุนุฏ

### 2. **ุฒุฑ ุงูุญุฐู:**
- โ **ูุชุงุญ** ููุนูููุงุช ูู ุงูุฎุฒูุฉ (`treasury`)
- โ **ุบูุฑ ูุชุงุญ** ูููุจูุนุงุช (`sales`) - ูุธูุฑ badge "ูุจูุนุงุช"

### 3. **ุงูุชุฑุชูุจ:**
- ุงูุฃุญุฏุซ ุฃููุงู (sortByDesc('date'))

---

## ๐ **ุงูุขู ุฌุฑุจ:**

1. ุงูุชุญ: `http://127.0.0.1:8000/treasury`
2. **ุณุชุฌุฏ:**
   - ุฌููุน ุงููุจูุนุงุช ุงูููุฏูุฉ ุงูููู
   - ุฌููุน ุงูุฅูุฑุงุฏุงุช ูุงููุตุฑููุงุช ุงููุณุฌูุฉ
   - ุงูุญุณุงุจุงุช ุตุญูุญุฉ ููุญุฏุซุฉ

3. **ุงุถุบุท "ุนุฑุถ ุงููู"** ูุฑุคูุฉ ูู ุงูุนูููุงุช

---

**ุชู ุจูุฌุงุญ! โจ**
